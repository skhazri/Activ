<h4 class="title">{{title}}</h4>
<form role="form" [formGroup]="form" (ngSubmit)="save()">

  <!-- Name -->
  <div class="form-group">
    <mat-form-field>
      <input required matInput placeholder="Name" formControlName="name">
      <mat-error *ngIf="f.name.hasError">
        {{getErrorName()}}
      </mat-error>
    </mat-form-field>
  </div>

  <!-- Location -->
  <div>
    <mat-form-field>
      <input matInput placeholder="Location" formControlName="location" ngx-google-places-autocomplete
        [options]='options' #placesRef="ngx-places" (onAddressChange)="handleAddressChange($event)" autocomplete="off">
    </mat-form-field>
  </div>

  <!-- Description -->
  <div class="form-group">
    <mat-form-field>
      <textarea matInput placeholder="Description" formControlName="description"></textarea>
    </mat-form-field>
  </div>
  <!-- Private Or Public -->
  <div class="form-group">
    <mat-radio-group formControlName="type" required labelPosition="after">
      <mat-radio-button value="private" color="primary"> Private* &nbsp;</mat-radio-button>
      <mat-radio-button value="public" color="primary"> Public* </mat-radio-button>
    </mat-radio-group>
  </div>
  <!-- Start Date -->
  <div class="form-group">
    <mat-form-field>
      <input matInput [matDatepicker]="picker" (dateChange)="onStartDateChange($event)" formControlName="startDate"
        placeholder="Start Date" [errorStateMatcher]="errorMatcher" onkeydown="return false" [min]="today">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker class="datepicker"></mat-datepicker>
      <mat-error *ngIf="form.hasError('StartDateReq')">
        Field is required
      </mat-error>
      <mat-error *ngIf="form.hasError('notValidDate')">
        Start Date must be inf to end Date
      </mat-error>
    </mat-form-field>
  </div>

  <!-- Start Time -->
  <div class="form-group">
    <mat-form-field>
      <input matInput [matTimeSelect]="myTimeSelect" placeholder="Start Time" onkeydown="return false"
        formControlName="startTime" [min]="startTimeMin" [errorStateMatcher]="errorMatcher">
      <mat-time-select-toggle matSuffix [for]="myTimeSelect"></mat-time-select-toggle>
      <mat-time-select #myTimeSelect></mat-time-select>
      <mat-error *ngIf="form.hasError('notValidTime')">
          Start Time must be inf to end Time
      </mat-error>
    </mat-form-field>
  </div>

  <!-- Toggle End Date Time -->
  <div class="form-group">
    <mat-slide-toggle formControlName="endDateTime" color="primary" (change)="onChange()"> Choose end date and
      time
    </mat-slide-toggle>
  </div>

  <!-- End Date -->

  <div class="form-group" *ngIf="isVisible">
    <mat-form-field>
      <input matInput [errorStateMatcher]="errorMatcher" [matDatepicker]="picker1" placeholder="End Date"
        formControlName="endDate" (dateChange)="onEndDateChange($event)" onkeydown="return false" [min]="today">
      <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
      <mat-datepicker #picker1 class="datepicker"></mat-datepicker>
      <mat-error *ngIf="form.hasError('EndDateReq')">
          Field is required 
      </mat-error>
      <mat-error *ngIf="form.hasError('notValidDate')">
          End Date must be sup to start Date
      </mat-error>
    </mat-form-field>
  </div>
  <!-- End Time -->
  <div class="form-group" *ngIf="isVisible">
    <mat-form-field>
      <input matInput placeholder="End Time" formControlName="endTime" [matTimeSelect]="myTimeSelect1"
        [errorStateMatcher]="errorMatcher" onkeydown="return false" [min]="endTimeMin">
      <mat-time-select-toggle matSuffix [for]="myTimeSelect1"></mat-time-select-toggle>
      <mat-time-select #myTimeSelect1></mat-time-select>
      <mat-error *ngIf="form.hasError('notValidTime')">
          End Time must be sup to start time
      </mat-error>
    </mat-form-field>
  </div>
  <div class="form-group text-center">
    <button type="button" class="btn btn-secondary" (click)="close()">Close</button>
    <button class="btn btn-primary my-4" [disabled]="!form.valid">Save changes</button>
  </div>
</form>
<ng-template #loading>
  Loading User Event...
</ng-template>