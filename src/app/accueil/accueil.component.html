<!-- Header -->
<nav class="navbar navbar-horizontal navbar-expand-lg navbar-light bg-white" id="sidenav-main">
  <div class="container-fluid">
    <!-- Brand -->
    <a class="navbar-brand pt-0" routerLink="">
      <img src="../assets/logo.png" class="navbar-brand-img" style="height: 70px" alt="logo">
    </a>

    <!-- Collapse -->
    <div class="collapse navbar-collapse" id="sidenav-collapse-main">
      <!-- Navigation -->
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" routerLink="">
            <i class="ni ni-tv-2 text-success"></i> Home
          </a>
        </li>
      </ul>
    </div>

    <!-- User -->

    <div *ngIf="loggedIn; then thenBlock else elseBlock"></div>
    <ng-template #thenBlock>
      <li class="nav-item dropdown">
        <a class="nav-link pr-0" href="#" role="button" data-toggle="dropdown" aria-haspopup="true"
           aria-expanded="false">
          <div class="media align-items-center">
              <span class="avatar avatar-sm rounded-circle">
                <img alt="Image accComp30" src="{{ user.photoUrl }}">
              </span>
            <div class="media-body ml-2 d-none d-lg-block">
              <span class="mb-0 text-sm  font-weight-bold">{{user.name}}</span>
            </div>
          </div>
        </a>
        <div class="dropdown-menu dropdown-menu-arrow dropdown-menu-right">
          <div class=" dropdown-header noti-title">
            <h6 class="text-overflow m-0">Welcome!</h6>
          </div>
          <a routerLink="/profile" class="dropdown-item">
            <i class="ni ni-single-02"></i>
            <span>My profile</span>
          </a>
          <div class="dropdown-divider"></div>
          <app-logout></app-logout>
        </div>
      </li>
    </ng-template>
    <ng-template #elseBlock>
      <app-login></app-login>
    </ng-template>



    <ul *ngIf="user" class="navbar-nav align-items-center d-none d-md-flex">

    </ul>
  </div>
</nav>
<!-- Main content -->
<div class="main-content">
  <!-- Header -->
  <div class="header pb-8 pt-5 pt-lg-8 d-flex align-items-center" hidden="false"
       style="min-height: 750px; background-image: url(../../assets/skiing.jpg); background-size: cover; background-position: center top;">
    <!-- Mask -->
    <span class="mask opacity-8"></span>
    <!-- Header container -->
    <div class="container-fluid d-flex align-items-center">
      <div class="row">
        <div class="col-lg-7 col-md-10">
          <h1 class="display-2 text-success">JMACTIV</h1>
          <h3 class="text-primary">Find and share your activities</h3>
        </div>
      </div>
      <div></div>
    </div>
  </div>
  <!-- Page content -->
  <div class="container-fluid mt--7">
    <div class="row">
      <div class="col-lg">
        <div class="card bg-white shadow">
          <nav>
            <button id="btJMactiv" (click)="showEventComp(0)" mat-raised-button color="{{set_color(0)}}" style="margin:.5em">JMactiv Events</button>
            <button id="btEventbrite" (click)="showEventComp(1)" mat-raised-button color="{{set_color(1)}}" style="margin:.5em"> EventBrite Events</button>
          </nav>
          <form class="form-inline mr-3 d-md-flex ml-lg-auto">
            <div class="form-group mb-0" align="left">
              <div>
                  <mat-form-field>
                      <input matInput placeholder="Type d'activité" type="search" name="search2"
                       [(ngModel)]="parentEventCriteria" autocomplete="off">
                  </mat-form-field>

              </div>
                <div style="margin:.5em">
                    <nav>
                        <button id="btGPS" mat-raised-button color="basic" > Coordonnées </button>
                    </nav>
                </div>
                <!-- Start Date -->
                <div class="form-group" style="margin-right: .5em">
                    <mat-form-field style="width:125px !important">
                        <input matInput [matDatepicker]="picker" name="startdate"
                               placeholder="Start Date" [errorStateMatcher]="errorMatcher" onkeydown="return false" [min]="today" [(ngModel)]="parentStartDateCriteria" >
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker class="datepicker"></mat-datepicker>
                    </mat-form-field>
                </div>
                <!-- Start Time -->
                <div class="form-group" style="margin-right: .5em">
                    <mat-form-field style="width:100px !important">
                        <input matInput [matTimeSelect]="myTimeSelect" name="searchtime" placeholder="Start Time" onkeydown="return false"  [(ngModel)]="parentStartTimeCriteria"
                               [min]="startTimeMin">
                        <mat-time-select-toggle matSuffix [for]="myTimeSelect"></mat-time-select-toggle>
                        <mat-time-select #myTimeSelect></mat-time-select>
                    </mat-form-field>
                </div>
                <!-- End Date -->
                <div class="form-group" style="margin-right: .5em">
                    <mat-form-field style="width:125px !important">
                        <input matInput [matDatepicker]="pickerend" name="enddate"
                               placeholder="End Date" [errorStateMatcher]="errorMatcher" onkeydown="return false" [min]="today" [(ngModel)]="parentEndDateCriteria" >
                        <mat-datepicker-toggle matSuffix [for]="pickerend"></mat-datepicker-toggle>
                        <mat-datepicker #pickerend class="datepicker"></mat-datepicker>
                    </mat-form-field>
                </div>
                <!-- End Time -->
                <div class="form-group" style="margin-right: .5em">
                    <mat-form-field style="width:100px !important">
                        <input matInput [matTimeSelect]="myTimeSelectend" name="endtime" placeholder="End Time" onkeydown="return false"  [(ngModel)]="parentEndTimeCriteria"
                               [min]="endTimeMin">
                        <mat-time-select-toggle matSuffix [for]="myTimeSelectend"></mat-time-select-toggle>
                        <mat-time-select #myTimeSelectend></mat-time-select>
                    </mat-form-field>
                </div>
                <div style="margin-right: .5em">
                    <mat-form-field style="width:75px !important">
                        <input matInput type="text" name="searchWidthIn" [(ngModel)]="parentDistanceCriteria"
                       autocomplete="off" placeholder="Rayon (km)">
                    </mat-form-field>
              </div>
            </div>
          </form>
          <app-eventjmactiv id="appEventJMactiv" style="display: block" [eventCriteria]="parentEventCriteria"></app-eventjmactiv>
          <app-eventbritecard id="appEventEventbrite" style="display: none" [eventCriteria]="parentEventCriteria" [LongitudeCriteria]="parentLongitudeCriteria" [LatitudeCriteria]="parentLatitudeCriteria" [DistanceCriteria]="parentDistanceCriteria" [StartDateCriteria]="parentStartDateCriteria" [StartTimeCriteria]="parentStartTimeCriteria" [EndDateCriteria]="parentEndDateCriteria" [EndTimeCriteria]="parentEndTimeCriteria"></app-eventbritecard>
        </div>
      </div>
    </div>
  </div>
  <!-- Footer -->
  <footer class="footer">
    <div class="row align-items-center justify-content-xl-between">
      <div class="col-xl-6">
        <div class="copyright text-center text-xl-left text-muted">
          &copy; 2019 <a href="#" class="font-weight-bold ml-1" >JMactiv</a>
        </div>
      </div>
      <div class="col-xl-6">
        <ul class="nav nav-footer justify-content-center justify-content-xl-end">
          <li class="nav-item">
            <a href="#" class="nav-link" target="_blank">INF5001</a>
          </li>
          <li class="nav-item">
            <a routerLink="/team" class="nav-link">About Us</a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link"
               target="_blank">MIT License</a>
          </li>
        </ul>
      </div>
    </div>
  </footer>
</div>
